<head>
  <title>BPM-Application</title>
</head>

<body>
    <header>
        <nav class="top-nav">
            <div class="container">
                <div class="nav-wrapper"><a class="mytitle page-title" href="/">BPM-Application</a></div>
            </div>
        </nav>
    </header>
    <div class="container" style="margin-top: 30px">
        <div class="section">
            <div class="row">
                <div class="col s12 l12">
                <h3>Task list</h3>
                <p>
                    As of {{lastUpdate}} you have {{#if taskList.total}}{{taskList.total}}{{else}}no{{/if}} tasks available.
                </p>
                </div>
                <div class="col s12 l4">
                    {{> tasklistWidget}}
                </div>
                <a class="hide-on-large-only" name="form">&nbsp;</a>
                <div class="col s12 l8">
                    {{> formWidget}}
                </div>
            </div>
        </div>
    </div>

</body>

<template name="tasklistWidget">
    {{#if taskList.total}}
        <table class="striped bordered">
            <thead>
                <th>Task #</th>
                <th>Name</th>
                <th>Assignee</th>
            </thead>
            <tbody>
                {{#each taskList.data}}
                <tr class="claim">
                    <td>{{id}}</td>
                    <td><a href="#form">{{name}}</a></td>
                    <td>{{assignee}}</td>
                </tr>
                {{/each}}
            </tbody>
        </table>

        <ul class="pagination">
            <li class="disabled"><a href="#!"><i class="mdi-navigation-chevron-left"></i></a></li>
            {{#each pages}}
            <li class="{{#if active this}}active{{else}}waves-effect{{/if}}"><a class="page" data-page="{{this}}" href="#page{{this}}">{{this}}</a></li>
            {{/each}}
            <li class="waves-effect"><a href="#!"><i class="mdi-navigation-chevron-right"></i></a></li>
        </ul>

        <br clear="left"/>

    {{/if}}

    <div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
        <a class="btn-floating btn-large right orange refresh"><i class="large mdi-navigation-refresh"></i></a>
    </div>

</template>

<template name="formWidget">
    {{#if formData}}
    <div class="row z-depth-1" style="padding: 20px">
        <p>
            <h3>{{currentTask.name}}</h3>
            <hr />
            <h5 class="right">Task #{{formData.taskId}}</h5>
            <br clear="both" />
            {{#if formData.error}}
                <h4>Error</h4>
                <blockquote>{{formData.error}}</blockquote>
            {{else}}
                <form>
                    <ul>
                    {{#each formData.formProperties}}
                        <li>{{name}}&nbsp;
                            <input class="formData" type="text" id="formData_{{id}}" data-property-id="{{id}}" value="{{value}}"/>
                        </li>
                    {{/each}}
                    </ul>
                </form>
            {{/if}}
            <div class="row right">
                <a class="btn small unselect"><i class="mdi-action-flip-to-back right"></i>Hide</a>
                <a class="btn small complete"><i class="mdi-action-done right"></i>Complete</a>
            </div>
        </p>
    </div>
    {{/if}}
</template>
